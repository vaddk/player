<script lang="ts" setup>
import { useVideo } from '../../stores/video'
import { useArchive } from '../../stores/archive'

const video = useVideo()
const archive = useArchive()
</script>

<template>
  <div class="player-control-buttons">
    <button
      type="button"
      class="rewind-fifteen-seconds rewind-backward"
      title="15 сек. назад (a.l)"
      @click.prevent="archive.rewindBackward"
    >
      <span class="rewind-backward-icon" />
    </button>
    <button
      type="button"
      class="pause-btn"
      :title="video.playing ? 'Пауза (p)' : 'Старт (p)'"
      @click.prevent="video.toggle"
    >
      <span :class="video.playing ? 'pause-icon' : 'play-icon'" />
    </button>
    <button
      type="button"
      class="rewind-fifteen-seconds rewind-forward"
      title="15 сек. вперед (a.r)"
      :disabled="archive.live"
      @click.prevent="archive.rewindForward"
    >
      <span class="rewind-forward-icon" />
    </button>
  </div>
</template>

<style lang="sass" scoped>
.player-control-buttons
  display: inline-flex
  align-items: center
  margin-right: 25px
  .rewind-fifteen-seconds
    display: inline-block
    width: 18px
    height: 20px
    &.rewind-backward
      margin-right: 10px
    &.rewind-forward
      margin-left: 7px
      &:disabled
        cursor: not-allowed
    .rewind-backward-icon
      display: block
      width: 100%
      height: 100%
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg width='22' height='24' viewBox='0 0 22 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M0 13.1463C0.794893 13.1463 1.55411 13.1463 2.31784 13.1463C2.39371 15.8075 3.41262 18.0344 5.48612 19.7328C7.43044 21.3255 9.70492 21.9459 12.1966 21.6071C16.8287 20.9777 19.9536 16.9797 19.6646 12.6326C19.3249 7.53064 14.9901 4.53064 11.0355 4.59135C11.0355 5.33588 11.0355 6.08086 11.0355 6.87047C9.66292 5.86437 8.32425 4.88371 6.95441 3.87985C6.95441 4.89086 6.95441 5.8608 6.95441 6.87627C5.39714 5.72287 3.86291 4.58644 2.30474 3.43214C3.85026 2.28544 5.37863 1.15213 6.93951 -0.0057373C6.93951 1.0084 6.93951 1.98236 6.93951 2.99605C8.30934 1.9895 9.65163 1.00349 11.0169 0.000511765C11.0242 0.0732688 11.0337 0.128618 11.0341 0.184413C11.035 0.790126 11.035 1.39629 11.0346 2.002C11.0346 2.28098 11.0346 2.27339 11.3214 2.28276C12.0824 2.30776 12.8348 2.39882 13.5773 2.57245C14.8139 2.86125 15.9652 3.35091 17.0279 4.03563C17.7848 4.5235 18.4749 5.09752 19.0869 5.75501C19.7111 6.42589 20.2526 7.15882 20.6916 7.96361C21.3763 9.21878 21.8085 10.5534 21.944 11.9719C22.0018 12.5777 22.0149 13.1927 21.9847 13.8002C21.9278 14.9407 21.6794 16.0446 21.253 17.1114C20.8754 18.0563 20.3877 18.9392 19.754 19.7342C19.3701 20.2158 18.9447 20.6707 18.4966 21.0951C17.7302 21.8218 16.854 22.4021 15.901 22.8708C14.8342 23.3957 13.7101 23.7358 12.5322 23.8974C11.4207 24.0501 10.3088 24.0335 9.20044 23.8474C8.33735 23.7023 7.49638 23.4814 6.69246 23.1381C5.64555 22.6913 4.68084 22.1088 3.82045 21.3656C3.17054 20.8041 2.58205 20.1855 2.07711 19.4927C1.50623 18.7098 1.04691 17.8679 0.702758 16.9636C0.36538 16.0771 0.144978 15.1648 0.0569071 14.2225C0.0239371 13.869 0.0185174 13.5137 0 13.1463Z' fill='white'/%3e%3cpath d='M10.7085 13.519C10.774 13.0985 10.8349 12.6981 10.8982 12.2987C11.0174 11.547 11.138 10.7958 11.2577 10.0441C11.2897 9.84143 11.3263 9.63878 11.3503 9.43524C11.3625 9.33213 11.4076 9.30669 11.5079 9.30713C12.8786 9.3116 14.2494 9.31249 15.6201 9.31428C15.7154 9.31428 15.8102 9.31428 15.9159 9.31428C15.9159 9.78474 15.9159 10.244 15.9159 10.7284C15.8599 10.7284 15.8016 10.7284 15.7434 10.7284C14.8293 10.7284 13.9147 10.7284 13.0006 10.7284C12.7847 10.7284 12.7856 10.7292 12.7458 10.9444C12.6546 11.4363 12.562 11.9277 12.4658 12.4415C12.9942 12.2022 13.5398 12.1612 14.0922 12.1755C14.668 12.1902 15.2068 12.3263 15.6585 12.7004C16.2018 13.1508 16.4656 13.7382 16.5021 14.4318C16.5396 15.1411 16.3829 15.7946 15.9295 16.3605C15.5939 16.7792 15.1558 17.0515 14.6391 17.1894C13.6893 17.443 12.7675 17.3635 11.904 16.8837C11.2807 16.5373 10.8453 16.0338 10.7238 15.3116C10.7094 15.2245 10.7116 15.1348 10.7058 15.0371C11.2952 15.0371 11.8665 15.0371 12.4116 15.0371C12.4929 15.2116 12.5602 15.3768 12.646 15.5316C12.6831 15.5986 12.7481 15.6629 12.8167 15.699C13.4698 16.045 14.4467 16.0173 14.6978 15.0192C14.7877 14.6617 14.7782 14.3015 14.6676 13.952C14.5678 13.6368 14.3383 13.4431 14.0104 13.3695C13.4283 13.2387 12.9418 13.4235 12.525 13.8203C12.4676 13.8748 12.4261 13.8939 12.343 13.8752C11.8055 13.7524 11.2663 13.6391 10.7085 13.519Z' fill='white'/%3e%3cpath d='M9.30792 17.1349C8.72078 17.1349 8.13997 17.1349 7.54832 17.1349C7.54832 15.1736 7.54832 13.2239 7.54832 11.2398C6.96389 11.4974 6.40159 11.7456 5.82304 12.0004C5.81717 11.9487 5.80994 11.9125 5.80994 11.8759C5.80904 11.4898 5.8131 11.1033 5.80723 10.7172C5.80588 10.6158 5.84201 10.5649 5.93369 10.5252C6.60574 10.2333 7.27507 9.93602 7.94621 9.64276C8.32017 9.47939 8.69594 9.3196 9.07306 9.16337C9.14081 9.13525 9.21985 9.13436 9.30882 9.11829C9.30792 11.7965 9.30792 14.4603 9.30792 17.1349Z' fill='white'/%3e%3c/svg%3e")
      background-repeat: no-repeat
      background-size: cover
    .rewind-forward-icon
      display: block
      width: 100%
      height: 100%
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg width='22' height='24' viewBox='0 0 22 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M22 13.1458C21.2051 13.1458 20.4459 13.1458 19.6821 13.1458C19.6063 15.807 18.5874 18.034 16.5139 19.7324C14.5695 21.325 12.2951 21.9454 9.80335 21.6066C5.17129 20.9773 2.04637 16.9792 2.33587 12.6321C2.67551 7.53015 7.01038 4.53015 10.965 4.59086C10.965 5.33539 10.965 6.08037 10.965 6.86998C12.3375 5.86388 13.6762 4.88323 15.046 3.87936C15.046 4.89037 15.046 5.86031 15.046 6.87579C16.6033 5.72239 18.1375 4.58595 19.6957 3.43166C18.1502 2.28495 16.6214 1.15164 15.0605 -0.00622559C15.0605 1.00791 15.0605 1.98187 15.0605 2.99556C13.6906 1.98901 12.3488 1.003 10.983 2.34847e-05C10.9758 0.0727805 10.9663 0.128129 10.9659 0.183925C10.965 0.789638 10.965 1.3958 10.9654 2.00151C10.9654 2.28049 10.9654 2.2729 10.6786 2.28227C9.91761 2.30727 9.16518 2.39833 8.42267 2.57196C7.18607 2.86076 6.03483 3.35042 4.97212 4.03514C4.21516 4.52301 3.52505 5.09703 2.91307 5.75452C2.2889 6.42541 1.74738 7.15833 1.30839 7.96312C0.623695 9.2183 0.191472 10.5529 0.055979 11.9715C-0.00183137 12.5772 -0.014929 13.1923 0.0153311 13.7998C0.0722381 14.9402 0.320642 16.0441 0.746993 17.1109C1.12457 18.0558 1.61234 18.9387 2.246 19.7337C2.62989 20.2153 3.05534 20.6702 3.50337 21.0947C4.26981 21.8213 5.146 22.4016 6.09897 22.8703C7.16575 23.3952 8.28989 23.7353 9.46778 23.8969C10.5793 24.0496 11.6912 24.0331 12.7995 23.8469C13.6626 23.7019 14.5036 23.4809 15.3075 23.1377C16.3544 22.6908 17.3191 22.1083 18.1795 21.3652C18.8294 20.8036 19.4179 20.185 19.9229 19.4922C20.4937 18.7093 20.9531 17.8675 21.2972 16.9631C21.6346 16.0767 21.855 15.1643 21.9431 14.222C21.976 13.8685 21.9815 13.5132 22 13.1458Z' fill='white'/%3e%3cpath d='M10.3937 13.5189C10.4592 13.0984 10.5201 12.698 10.5834 12.2985C10.7026 11.5469 10.8232 10.7956 10.9429 10.044C10.9749 9.84131 11.0115 9.63866 11.0354 9.43512C11.0476 9.33201 11.0928 9.30657 11.1931 9.30701C12.5638 9.31148 13.9345 9.31237 15.3053 9.31415C15.4006 9.31415 15.4954 9.31415 15.6011 9.31415C15.6011 9.78462 15.6011 10.2439 15.6011 10.7282C15.5451 10.7282 15.4868 10.7282 15.4286 10.7282C14.5145 10.7282 13.5999 10.7282 12.6858 10.7282C12.4699 10.7282 12.4708 10.7291 12.431 10.9443C12.3398 11.4362 12.2472 11.9276 12.151 12.4414C12.6794 12.2021 13.225 12.161 13.7774 12.1753C14.3532 12.1901 14.892 12.3262 15.3437 12.7003C15.887 13.1506 16.1508 13.738 16.1873 14.4317C16.2248 15.141 16.0681 15.7944 15.6147 16.3604C15.2791 16.7791 14.841 17.0514 14.3243 17.1893C13.3745 17.4428 12.4527 17.3634 11.5892 16.8836C10.9659 16.5372 10.5305 16.0337 10.409 15.3115C10.3946 15.2244 10.3968 15.1347 10.391 15.037C10.9803 15.037 11.5517 15.037 12.0968 15.037C12.1781 15.2115 12.2454 15.3766 12.3312 15.5315C12.3682 15.5985 12.4333 15.6628 12.5019 15.6989C13.155 16.0448 14.1319 16.0172 14.383 15.0191C14.4729 14.6616 14.4634 14.3014 14.3528 13.9519C14.253 13.6367 14.0235 13.443 13.6956 13.3693C13.1135 13.2386 12.627 13.4234 12.2102 13.8202C12.1528 13.8746 12.1113 13.8938 12.0282 13.8751C11.4912 13.7523 10.9519 13.639 10.3937 13.5189Z' fill='white'/%3e%3cpath d='M8.99356 17.135C8.40643 17.135 7.82562 17.135 7.23396 17.135C7.23396 15.1736 7.23396 13.2239 7.23396 11.2398C6.64954 11.4974 6.08724 11.7456 5.50869 12.0004C5.50282 11.9487 5.49559 11.9125 5.49559 11.8759C5.49469 11.4898 5.49875 11.1033 5.49288 10.7172C5.49153 10.6158 5.52766 10.5649 5.61934 10.5252C6.29139 10.2333 6.96072 9.93602 7.63186 9.64276C8.00582 9.47939 8.38159 9.3196 8.75871 9.16337C8.82646 9.13525 8.90549 9.13436 8.99447 9.11829C8.99356 11.7965 8.99356 14.4604 8.99356 17.135Z' fill='white'/%3e%3c/svg%3e")
      background-repeat: no-repeat
      background-size: cover
  .pause-btn
    width: 18px
    height: 20px
    span
      display: block
      width: 100%
      height: 100%
      background-repeat: no-repeat
      background-size: cover
      &.pause-icon
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg height='327pt' viewBox='-45 0 327 327' width='327pt' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3e%3cpath d='m158 0h71c4.417969 0 8 3.582031 8 8v311c0 4.417969-3.582031 8-8 8h-71c-4.417969 0-8-3.582031-8-8v-311c0-4.417969 3.582031-8 8-8zm0 0'/%3e%3cpath d='m8 0h71c4.417969 0 8 3.582031 8 8v311c0 4.417969-3.582031 8-8 8h-71c-4.417969 0-8-3.582031-8-8v-311c0-4.417969 3.582031-8 8-8zm0 0'/%3e%3c/svg%3e")
        background-position: 100%
      &.play-icon
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg version='1.1' baseProfile='tiny' id='Слой_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 22.3 24.8' overflow='visible' xml:space='preserve' fill='white'%3e%3cpath fill-rule='evenodd' d='M21.3,13.5c0.7-0.4,0.7-1.3,0-1.7L1.9,0.4C1.2,0,0.4,0.5,0.4,1.3L0.3,23.5c0,0.8,0.8,1.2,1.5,0.9 L21.3,13.5z'/%3e%3c/svg%3e")
@media (min-width: 1900px)
  .player-control-buttons
    margin-right: 40px
@media (max-width: 1300px)
  #player:not(.fullscreen)
    .player-control-buttons
      width: 20%
      justify-content: center
      margin-right: 0
      margin-bottom: 5px
@media (max-width: 500px)
  #player:not(.fullscreen)
    .player-control-buttons
      width: 30%
@media (max-width: 400px)
  #player:not(.fullscreen)
    .player-control-buttons
      .rewind-fifteen-seconds
        width: 15px
        height: 17px
        &.rewind-backward
          margin-right: 7px
        &.rewind-forward
          margin-left: 6px
      .pause-btn
        width: 15px
        height: 17px
        img
          width: 15px
</style>
